<!DOCTYPE html> <html lang="es"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous"> <link rel="stylesheet" href="/assets/main.css"> <link rel="canonical" href="http://0.0.0.0:4000/2016/04/03/rpi-iniciar-hd-externo.html"> <link rel="alternate" type="application/rss+xml" title="Si lo haces, hazlo bien" href="/feed.xml"> <!-- --> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Raspberry Pi. Iniciar desde un HDD externo | Si lo haces, hazlo bien</title> <meta name="generator" content="Jekyll v4.3.1" /> <meta property="og:title" content="Raspberry Pi. Iniciar desde un HDD externo" /> <meta name="author" content="Vctrsnts" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Después de haber configurado la red, ahora pasare a explicar como extraer la información de la raiz / de la SD para pasarla a un HDD externo y así alargar la vida de nuestra SD." /> <meta property="og:description" content="Después de haber configurado la red, ahora pasare a explicar como extraer la información de la raiz / de la SD para pasarla a un HDD externo y así alargar la vida de nuestra SD." /> <link rel="canonical" href="http://0.0.0.0:4000/2016/04/03/rpi-iniciar-hd-externo.html" /> <meta property="og:url" content="http://0.0.0.0:4000/2016/04/03/rpi-iniciar-hd-externo.html" /> <meta property="og:site_name" content="Si lo haces, hazlo bien" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2016-04-03T00:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Raspberry Pi. Iniciar desde un HDD externo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Vctrsnts"},"dateModified":"2016-04-03T00:00:00+00:00","datePublished":"2016-04-03T00:00:00+00:00","description":"Después de haber configurado la red, ahora pasare a explicar como extraer la información de la raiz / de la SD para pasarla a un HDD externo y así alargar la vida de nuestra SD.","headline":"Raspberry Pi. Iniciar desde un HDD externo","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/2016/04/03/rpi-iniciar-hd-externo.html"},"url":"http://0.0.0.0:4000/2016/04/03/rpi-iniciar-hd-externo.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <header id="nav-header" class="border-dark border-left-0 border-right-0"> <div id="nav-container" class="container position-relative d-flex justify-content-between align-items-center"> <a class="h4 m-0 text-dark" href="/">Si lo haces, hazlo bien</a> <nav id="nav-menu-container" class="text-right navbar-light"> <input type="checkbox" id="nav-trigger" class="d-none"/> <label for="nav-trigger" aria-label="button" class="m-2 d-inline-block d-md-none navbar-toggler-icon"> </label> <div id="nav-menu" class="d-none d-md-block"> <a class="text-dark ml-3 ml-md-0 p-2 d-block d-md-inline-block" href="/about/">About</a> <a class="text-dark ml-3 ml-md-0 p-2 d-block d-md-inline-block" href="/posts/">Posts</a> </div> </nav> </div> </header> <main aria-label="Content"> <div id="content-container" class="container"> <article itemscope itemtype="http://schema.org/BlogPosting"> <header class="pt-4 pb-3"> <h1 itemprop="name headline">Raspberry Pi. Iniciar desde un HDD externo</h1> <p class="text-secondary"> <time datetime="2016-04-03T00:00:00+00:00" itemprop="datePublished"> Apr 3, 2016 </time> </p> </header> <div class="text-justify" itemprop="articleBody" id="content"> <p>Después de haber configurado la red, ahora pasare a explicar como extraer la información de la raiz <code class="language-plaintext highlighter-rouge">/</code> de la SD para pasarla a un HDD externo y así alargar la vida de nuestra SD.</p> <p>Haciendo este cambio, solamente se usara la SD en el momento del inicio, luego todo funcionara desde el HDD externo. El proceso es un poco largo, pero a la larga beneficiosa.</p> <p>Lo primero que tenemos que hacer, es realizar una imagen de nuestra SD, tal como se encuentra ahora. Yo el proceso lo explicare bajo la premisa de que estas con Linux.</p> <!--more--> <p>Antes de nada, tienes que saber en que dispositivo esta nuestra SD cuando lo insertamos en nuestro PC, para eso, haciendo un mount, se puede ver facilmente. En mi caso es el siguiente:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   root@raspberry:~# mount
   /dev/mmcblk0p1     /boot
   /dev/mmcblk0p2     /
</code></pre></div></div> <p>Lo que a nosotros nos interesa es copiar la segunda particion de la siguiente manera:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  root@raspberry:~# <span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/mmcblk0p2 <span class="nv">of</span><span class="o">=</span>/home/usuario/backup.img
</code></pre></div></div> <p>Después lo que yo hice, fue crear las particiones necesarias en el HDD externo.</p> <p>Mi particionado, quedo de la siguiente manera (recordar que ahora mismo se estan realizando estas acciones desde el nuestro PC, no desde la Raspberry, por eso pongo <code class="language-plaintext highlighter-rouge">sdb</code>):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   /dev/sdb1    /
   /dev/sdb2    /home
   <span class="c"># para amule-daemon</span>
   /dev/sdb5    /media/Incoming
   /dev/sdb6    /media/Temporal
   <span class="c"># para transmission-daemon</span>
   /dev/sdb7    /media/Torrents
</code></pre></div></div> <p>Una vez, tenemos creadas las particiones en nuestro HDD externo, pasamos a copiar la imagen que hemos realizado anteriormente a la raiz de HDD de la siguiente manera:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   root@raspberry:~# <span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/home/usuario/backup.img <span class="nv">of</span><span class="o">=</span>/dev/sdb1
</code></pre></div></div> <p>Ahora viene lo importante, que es modificar un fichero de la partición <code class="language-plaintext highlighter-rouge">/boot</code> de la SD para que cuando pongamos el HDD externo conectado a la Raspberry funcione correctamente. Recordar que cuando se haga esa conexión, pasara de ser <code class="language-plaintext highlighter-rouge">/dev/sdb</code> a <code class="language-plaintext highlighter-rouge">/dev/sda</code>.</p> <p>El fichero a modificar es el siguiente (previamente hemos hecho un mount de la particion <code class="language-plaintext highlighter-rouge">/boot</code>):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   root@raspberry:~# vi cmdline.txt
</code></pre></div></div> <p>Y modificamos lo siguiente <code class="language-plaintext highlighter-rouge">root=/dev/mmcblk0p2</code> por <code class="language-plaintext highlighter-rouge">root=/dev/sda1</code></p> <p>Otra cosa a tener en cuenta, es que si queremos que por defecto, se monten el resto de particiones que hemos creado, se tienen que incluir en el fichero <code class="language-plaintext highlighter-rouge">/etc/fstab</code> de la Raspberry. Yo lo he hecho de la siguiente manera:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   root@raspberry:~# vi /etc/fstab
</code></pre></div></div> <p>Visualizaremos lo siguiente:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   proc            /proc           proc    defaults                0       0
   /dev/mmcblkp1   /boot           vfat    defaults                0       2
   /dev/mmcblkp2   /               ext4    defaults,noatime        0       1
</code></pre></div></div> <p>Y en mi caso, lo deje de la siguiente manera:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   proc            /proc           proc    defaults                0       0
   /dev/mmcblk0p1  /boot           vfat    defaults                0       2
   /dev/sda1       /               ext4    defaults,noatime        0       1
   /dev/sda2       /home           ext4    defaults                0       0
   /dev/sda5       /media/Incoming ext4    defaults,noatime        0       0
   /dev/sda6       /media/Temporal ext4    defaults,noatime        0       0
  /dev/sda7       /media/Torrents ext4    defaults,noatime        0       0
</code></pre></div></div> <p>Ahora solamente nos quedaria poner la SD en nuestra Raspberry, conectar el HD externo y todo tendria que funcionar correctamente.</p> </div> </article> </div> </main> <footer id="site-footer"> <div class="container"> <div class="h5 pt-4">Si lo haces, hazlo bien</div> <div class="row"> <div class="col col-lg-3"> <ul class="list-unstyled"> <li class="text-secondary"> Vctrsnts </li> </ul> </div> <div class="col-6 col-lg-3"> <ul class="list-unstyled"> <li> <a href="https://github.com/Vctrsnts"> <span class="align-middle text-secondary pr-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>GitHub</title><path fill="currentColor" d="M8 .43C3.714.43.24 3.905.24 8.192c0 3.428 2.223 6.337 5.307 7.363.388.07.53-.168.53-.374l-.01-1.32c-2.16.47-2.614-1.04-2.614-1.04-.353-.896-.862-1.135-.862-1.135-.705-.48.053-.472.053-.472.78.055 1.19.8 1.19.8.692 1.186 1.816.843 2.258.645.07-.502.27-.843.493-1.037-1.723-.197-3.534-.862-3.534-3.836 0-.847.302-1.54.8-2.082-.08-.197-.347-.986.076-2.054 0 0 .652-.21 2.134.796A7.39 7.39 0 0 1 8 4.184a7.45 7.45 0 0 1 1.943.261c1.482-1.004 2.132-.796 2.132-.796.423 1.068.157 1.857.077 2.054.497.542.798 1.235.798 2.082 0 2.98-1.814 3.637-3.543 3.83.28.24.527.713.527 1.437l-.01 2.13c0 .208.14.45.534.373 3.08-1.028 5.302-3.935 5.302-7.362C15.76 3.906 12.285.43 8 .43z"/></svg></span><span>Vctrsnts</span> </a> </li> <li> <a href="https://mastodon.online/@vsantos"> <span class="align-middle text-secondary pr-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mastodon" viewBox="0 0 16 16"> <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/> </svg></span><span>vsantos</span> </a> </li> <li> <a href="https://twitter.com/Vctrsnts1"> <span class="align-middle text-secondary pr-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16"> <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/> </svg></span><span>Vctrsnts1</span> </a> </li> </ul> </div> <div class="col-12 col-lg"> <p class="text-secondary text-justify">Bienvenido a mi Blog personal. Aqui encontraras tutoriales y notas que voy tomando cuando hago mis instalaciones, configuraciones, pruebas, etc... </p> </div> </div> </div> </footer> </body> </html>
